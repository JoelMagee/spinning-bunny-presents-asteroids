<!DOCTYPE HTML>
<html>
	<head>
		<title>spinning bunny</title>
		<!-- Bootstrap -->
		<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
		
		<script src="scripts/require.config.js"></script>
		<script data-main="scripts/main" src="scripts/libs/require.js"></script>
		
	</head>
	<body>
		<div id="loginScreen" class="container-fluid">
			<div class="row">
				<div class="col-md-2 col-md-offset-1">
					<h1>Login screen</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4 col-md-offset-4">
					<div class="panel panel-primary">
						<div class="panel-heading">Login</div>
						<div class="panel-body">
							<form role="form" data-bind="submit: login">
								<div class="form-group">
									<label for="usernameInput">Username</label>
									<input type="text" class="form-control" id="usernameInput" placeholder="Username" data-bind="value: username" autofocus>
								</div>
								<div class="form-group">
									<label for="passwordInput">Password</label>
									<input type="password" class="form-control" id="passwordInput" placeholder="Password" data-bind="value: password">
								</div>
								<button type="submit" class="btn btn-default">Login</button>
							</form>	
							<br/>
							<p>Not registered? <a data-toggle="modal" data-target="#registerModal" style="cursor: pointer" data-bind="click: clearModal">Register here</a></p>
							<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
											<h4 class="modal-title" id="modalLabel">Register</h4>
										</div>
										<div class="modal-body">
											<p>Register as a new user with a username and a password.</p>
											<form role="form">
												<div class="form-group">
													<label for="usernameInputModal">Username</label>
													<input type="text" class="form-control" id="usernameInputModal" placeholder="Username" data-bind="value: usernameModal">
												</div>
												<div class="form-group">
													<label for="passwordInputModal">Password</label>
													<input type="password" class="form-control" id="passwordInputModal" placeholder="Password" data-bind="value: passwordModal">
												</div>
											</form>	
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
											<button type="button" class="btn btn-primary" data-bind="click: register" >Submit</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="alert alert-danger fade in hidden" role="alert" data-bind="visible: showError, css: {hidden: false}">
						<button type="button" class="close" data-bind="click: hideAlert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
						<p data-bind="text: errorMessage"></p>
					</div>
				</div>
			</div>
		</div>
		<div id="lobbyListScreen" class="screen container-fluid">
			<div class="row">
				<div class="col-md-4 col-md-offset-1">
					<h1>Game lobbies</h1>
				</div>
				<div class="col-md-2 col-md-offset-5">
					<button type="button" class="btn btn-default spaced" data-bind="click: logout">Logout</button>
				</div>
			</div>
			<div class="row">
				<div class="col-md-2 col-md-offset-1">
					<button class="btn btn-default spaced" data-bind="click: refreshLobbies">Refresh Lobby List</button>
					<button class="btn btn-default spaced" data-bind="click: createLobby">Create Lobby</button>
					<input class="spaced" data-bind="value: lobbyName">
				</div>
				<div class="col-md-6">
					<div class="panel panel-default">
						<div class="panel-heading">Open Lobbies</div>
						<table class="table table-hover">
							<thead>
								<tr>
									<th>#</th>
									<th>Name</th>
									<th>Players</th>
								</tr>
							</thead>
							<!-- ko if: lobbies().length -->
							<tbody data-bind="foreach: lobbies">
								<tr data-bind="click: function () {$parent.joinLobby($data)}"> <!-- didn't work otherwise -->
									<td data-bind="text: id "></td>
									<td data-bind="text: name"></td>
									<td data-bind="text: totPlayers"></td>
								</tr>
							</tbody>
							<!-- /ko -->
							<tbody data-bind="if: lobbies().length === 0">
								<tr >
									<td colspan="3" style="text-align:center">No lobbies</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-md-2">
					<div class="panel panel-default">
						<div class="panel-heading">Users Online</div>
						<ul class="list-group" data-bind="foreach: users">
							<li class="list-group-item" data-bind="text: name"></li>
						</ul>						
					</div>
				</div>
			</div>
		</div>
		<div id="lobbyScreen" class="screen container-fluid">
			<div class="row">
				<br/>
				<div class="col-md-6 col-md-offset-3">
					<div class="panel panel-default">
						<div class="panel-heading" data-bind="text: name">Lobby name</div>
						<br/>
						<div class="row">
							<div class="  col-md-4 col-md-offset-1">
								<div class="panel panel-default">
									<div class="panel-heading">Players</div>
									<ul class="list-group" data-bind="foreach: players">
										<li class="list-group-item" data-bind="text: name"></li>
									</ul>
								</div>
							</div>
							<div class="col-md-5 col-md-offset-1">
								<div class="panel panel-default">
									<div class="panel-heading">Chat</div>
									<ul id="chatbody" class="list-group scrollable" data-bind="foreach: messages">
										<li class="list-group-item" data-bind="text: $data"></li>
									</ul>
									<form role="form">
										<div class="input-group">
											<input type="text" class="form-control square" placeholder="..." data-bind="value: message">
												<span class="input-group-btn">
													<button class="btn btn-default square" type="submit" data-bind="click: sendMessage"><span class="glyphicon glyphicon-comment"></span></button>
												</span>
										</div>
									</form>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-5 col-md-offset-1">
								<button type="button" class="btn btn-success" data-bind="click: startLobby">Start</button>
								<button class="btn btn-warning" data-bind="click: leaveLobby">Leave</button>
								<button class="btn btn-danger" data-bind="click: closeLobby">Close lobby</button>
							</div>
						</div>
						<br/>
					</div>
				</div>
			</div>
		</div>
		<div id="gameScreen" class="screen">
			<button id="endTurnButton" class="btn btn-danger" data-bind="click: endTurn">End Turn</button>
			<button id="panLeftButton" class="btn btn-default" data-bind="click: panLeft"><span class="glyphicon glyphicon-arrow-left"></span></button>
			<button id="panUpButton" class="btn btn-default" data-bind="click: panUp"><span class="glyphicon glyphicon-arrow-up"></span></button>
			<button id="panDownButton" class="btn btn-default" data-bind="click: panDown"><span class="glyphicon glyphicon-arrow-down"></span></button>
			<button id="panRightButton" class="btn btn-default" data-bind="click: panRight"><span class="glyphicon glyphicon-arrow-right"></span></button>
			<button id="zoomInButton" class="btn btn-default" data-bind="click: zoomIn"><span class="glyphicon glyphicon-zoom-in"></span></button>
			<button id="zoomOutButton" class="btn btn-default" data-bind="click: zoomOut"><span class="glyphicon glyphicon-zoom-out"></span></button>
			<button id="endGameButton" class="btn btn-danger" data-bind="click: endGame">Leave game</button>
			<!--<h1>Guess an integer between 1-100</h1>
			<div class="col-md-3">
				<p>Guess a number: <input data-bind="value: guess"></p>
				<button data-bind="click: sendGuess">Send guess</button>
				<p data-bind="visible: waiting">----------- Waiting for all guesses -----------</p>
			</div>
			<div class="col-md-3">
				<p>The number was: <span data-bind="text: number"></span></p>
				<p>The winner was: <span data-bind="text: winner"></span></p>
				<p>The current closest is: <span data-bind="text: closest"></span></p>
			</div>
			<div class="col-md-3">
				<p>Winner guessed: <span data-bind="text: winnerGuess"></span></p>
			</div>-->
		</div>
	</body>
</html>